!function(e){var I={};function g(t){if(I[t])return I[t].exports;var n=I[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,g),n.l=!0,n.exports}g.m=e,g.c=I,g.d=function(e,I,t){g.o(e,I)||Object.defineProperty(e,I,{enumerable:!0,get:t})},g.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.t=function(e,I){if(1&I&&(e=g(e)),8&I)return e;if(4&I&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(g.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&I&&"string"!=typeof e)for(var n in e)g.d(t,n,function(I){return e[I]}.bind(null,n));return t},g.n=function(e){var I=e&&e.__esModule?function(){return e.default}:function(){return e};return g.d(I,"a",I),I},g.o=function(e,I){return Object.prototype.hasOwnProperty.call(e,I)},g.p="",g(g.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _sidebar_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);\n/* harmony import */ var _sidebar_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_sidebar_js__WEBPACK_IMPORTED_MODULE_1__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbmRleC5qcz8zNzAwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi9zdHlsZS5jc3MnO1xuaW1wb3J0ICcuL3NpZGViYXIuanMnOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9zdHlsZS5jc3M/YWVkNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")},function(module,exports){eval('function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/**\n * Internal block libraries\n */\nvar __ = wp.i18n.__;\nvar _wp$editPost = wp.editPost,\n    PluginSidebar = _wp$editPost.PluginSidebar,\n    PluginSidebarMoreMenuItem = _wp$editPost.PluginSidebarMoreMenuItem;\nvar _wp$components = wp.components,\n    PanelBody = _wp$components.PanelBody,\n    TextControl = _wp$components.TextControl,\n    TextareaControl = _wp$components.TextareaControl;\nvar _wp$element = wp.element,\n    Component = _wp$element.Component,\n    Fragment = _wp$element.Fragment;\nvar _wp$data = wp.data,\n    withSelect = _wp$data.withSelect,\n    select = _wp$data.select;\nvar registerPlugin = wp.plugins.registerPlugin;\nvar addAction = wp.hooks.addAction;\n\nvar NofmMetadata =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NofmMetadata, _Component);\n\n  function NofmMetadata(props) {\n    var _this;\n\n    _classCallCheck(this, NofmMetadata);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NofmMetadata).call(this, props));\n    _this.handleInputValue = _this.handleInputValue.bind(_assertThisInitialized(_this));\n    _this.handleSelectValue = _this.handleSelectValue.bind(_assertThisInitialized(_this));\n    _this.state = {\n      _id_youtube: {\n        key: null,\n        value: null\n      },\n      _id_vimeo: {\n        key: null,\n        value: null\n      },\n      _episodio_duration: {\n        key: null,\n        value: null\n      },\n      _episodio_url: {\n        key: null,\n        value: null\n      },\n      _episodio_show: {\n        key: null,\n        value: null\n      },\n      _prog_horario_dias: {\n        key: null,\n        value: null\n      },\n      _prog_hora: {\n        key: null,\n        value: null\n      },\n      _prog_duration: {\n        key: \'\',\n        value: null\n      },\n      programas: [],\n      is_pt_post: false,\n      is_cpt_programs: false,\n      is_cpt_episodios: false,\n      is_cpt_glosario: false\n    };\n    var postType = _this.props.postType;\n    var path;\n\n    if (postType === \'post\') {\n      path = "/wp/v2/posts/".concat(_this.props.postId);\n    } else if (postType === \'episodios\') {\n      path = "/wp/v2/episodios/".concat(_this.props.postId);\n    } else if (postType === \'programas\') {\n      path = "/wp/v2/programas/".concat(_this.props.postId);\n    } else if (postType === \'glosario\') {\n      path = "/wp/v2/glosario/".concat(_this.props.postId);\n    }\n\n    if (postType !== \'archivo\') {\n      wp.apiFetch({\n        path: path,\n        method: \'GET\'\n      }).then(function (data) {\n        _this.setState({\n          _id_youtube: {\n            key: \'_id_youtube\',\n            value: data.meta._id_youtube\n          },\n          _id_vimeo: {\n            key: \'_id_vimeo\',\n            value: data.meta._id_vimeo\n          },\n          _episodio_duration: {\n            key: \'_episodio_duration\',\n            value: data.meta._episodio_duration\n          },\n          _episodio_url: {\n            key: \'_episodio_url\',\n            value: data.meta._episodio_url\n          },\n          _episodio_show: {\n            key: \'_episodio_show\',\n            value: data.meta._episodio_show\n          },\n          _prog_horario_dias: {\n            key: \'_prog_horario_dias\',\n            value: data.meta._prog_horario_dias\n          },\n          _prog_hora: {\n            key: \'_prog_hora\',\n            value: data.meta._prog_hora\n          },\n          _prog_duration: {\n            key: \'_prog_duration\',\n            value: data.meta._prog_duration\n          }\n        });\n\n        return data;\n      }).catch(function (error) {\n        return console.error(error);\n      });\n    }\n\n    return _this;\n  } //end constructor\n\n\n  _createClass(NofmMetadata, [{\n    key: "componentDidMount",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _select = select(\'core/editor\'),\n          getCurrentPostType = _select.getCurrentPostType;\n\n      if (getCurrentPostType() === \'post\') {\n        if (!this.state.is_pt_post) {\n          this.setState({\n            is_pt_post: true,\n            is_cpt_episodios: false,\n            is_cpt_programs: false,\n            is_cpt_glosario: false\n          });\n        }\n      } else if (getCurrentPostType() === \'episodios\') {\n        if (!this.state.is_cpt_episodios) {\n          this.setState({\n            is_pt_post: false,\n            is_cpt_episodios: true,\n            is_cpt_programs: false,\n            is_cpt_glosario: false\n          });\n        }\n      } else if (getCurrentPostType() === \'programas\') {\n        if (!this.state.is_cpt_programs) {\n          this.setState({\n            is_pt_post: false,\n            is_cpt_episodios: false,\n            is_cpt_programs: true,\n            is_cpt_glosario: false\n          });\n        }\n      } else if (getCurrentPostType() === \'glosario\') {\n        if (!this.state.is_cpt_glosario) {\n          this.setState({\n            is_pt_post: false,\n            is_cpt_episodios: false,\n            is_cpt_programs: false,\n            is_cpt_glosario: true\n          });\n        }\n      } //Getting posts from programas CPT\n\n\n      wp.apiFetch({\n        path: \'wp/v2/programas/\',\n        method: \'GET\'\n      }).then(function (response) {\n        _this2.setState({\n          programas: response\n        });\n\n        return response;\n      }).catch(function (error) {\n        return console.error(error);\n      });\n    } // End did mount\n\n  }, {\n    key: "render",\n    //end get derived state from props\n    value: function render() {\n      var _this$state = this.state,\n          is_pt_post = _this$state.is_pt_post,\n          is_cpt_programs = _this$state.is_cpt_programs,\n          is_cpt_episodios = _this$state.is_cpt_episodios,\n          is_cpt_glosario = _this$state.is_cpt_glosario,\n          programas = _this$state.programas;\n      var metabox_render; // console.log(this.state);\n\n      if (is_pt_post) {\n        metabox_render = wp.element.createElement(PanelBody, null, wp.element.createElement("label", {\n          "for": "_id_youtube"\n        }, "Id de Youtube"), wp.element.createElement("br", null), wp.element.createElement("input", {\n          type: "text",\n          name: "_id_youtube",\n          value: this.state._id_youtube.value,\n          onChange: this.handleInputValue\n        }), wp.element.createElement("br", null), wp.element.createElement("label", {\n          "for": "_id_vimeo"\n        }, "Id de Vimeo"), wp.element.createElement("br", null), wp.element.createElement("input", {\n          type: "text",\n          name: "_id_vimeo",\n          value: this.state._id_vimeo.value,\n          onChange: this.handleInputValue\n        }), wp.element.createElement("br", null));\n      } else if (is_cpt_episodios || is_cpt_glosario) {\n        metabox_render = wp.element.createElement(PanelBody, null, wp.element.createElement("label", {\n          "for": "_episodio_duration"\n        }, "Duraci\\xF3n del episodio"), wp.element.createElement("br", null), wp.element.createElement("input", {\n          type: "text",\n          name: "_episodio_duration",\n          value: this.state._episodio_duration.value,\n          onChange: this.handleInputValue\n        }), wp.element.createElement("br", null), wp.element.createElement("label", {\n          "for": "_episodio_url"\n        }, "Url del episodio"), wp.element.createElement("br", null), wp.element.createElement("input", {\n          type: "text",\n          name: "_episodio_url",\n          value: this.state._episodio_url.value,\n          onChange: this.handleInputValue\n        }), wp.element.createElement("br", null), wp.element.createElement("label", null, "Programa al que pertenece"), wp.element.createElement("br", null), wp.element.createElement("select", {\n          name: "_episodio_show",\n          onChange: this.handleSelectValue,\n          value: this.state._episodio_show.value\n        }, wp.element.createElement("option", {\n          value: ""\n        }, "Sin programa"), programas.map(function (programa) {\n          return wp.element.createElement("option", {\n            key: programa.id,\n            value: programa.id\n          }, programa.title.rendered);\n        })));\n      } else if (is_cpt_programs) {\n        metabox_render = wp.element.createElement(PanelBody, null, wp.element.createElement("label", {\n          "for": "_prog_horario_dias"\n        }, "Horario del programa"), wp.element.createElement("br", null), wp.element.createElement("input", {\n          type: "text",\n          name: "_prog_horario_dias",\n          value: this.state._prog_horario_dias.value,\n          onChange: this.handleInputValue,\n          placeholder: "Lunes y Viernes"\n        }), wp.element.createElement("br", null), wp.element.createElement("label", {\n          "for": "_prog_hora"\n        }, "Hora del programa"), wp.element.createElement("br", null), wp.element.createElement("input", {\n          type: "text",\n          name: "_prog_hora",\n          value: this.state._prog_hora.value,\n          onChange: this.handleInputValue,\n          placeholder: "0 - 23h"\n        }), wp.element.createElement("br", null), wp.element.createElement("label", {\n          "for": "_prog_duration"\n        }, "Duraci\\xF3n del programa"), wp.element.createElement("br", null), wp.element.createElement("input", {\n          type: "text",\n          name: "_prog_duration",\n          value: this.state._prog_duration.value,\n          onChange: this.handleInputValue,\n          placeholder: "30, 60 รณ 90min"\n        }), wp.element.createElement("br", null));\n      }\n\n      return wp.element.createElement(Fragment, null, wp.element.createElement(PluginSidebarMoreMenuItem, {\n        target: "nofm-metadata-sidebar"\n      }, __(\'NoFm Metadata\')), wp.element.createElement(PluginSidebar, {\n        name: "nofm-metadata-sidebar",\n        title: __(\'Nofm Metadata\')\n      }, metabox_render));\n    } //end render\n\n  }, {\n    key: "handleInputValue",\n    value: function handleInputValue(event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      this.setState(_defineProperty({}, name, {\n        key: name,\n        value: value\n      }));\n    } //end handle input value\n\n  }, {\n    key: "handleSelectValue",\n    value: function handleSelectValue(event) {\n      var target = event.target;\n      var value = target.value;\n      var name = target.name; // console.log(`${value} -> ${name}`);\n\n      this.setState(_defineProperty({}, name, {\n        key: name,\n        value: value\n      }));\n    }\n  }], [{\n    key: "getDerivedStateFromProps",\n    value: function getDerivedStateFromProps(nextProps, state) {\n      var state_arr = Object.values(state);\n      var postType = nextProps.postType;\n\n      if (postType !== \'archivo\') {\n        var filtered = state_arr.filter(function (object) {\n          if (_typeof(object.key) !== \'object\' || object.key != \'\') {\n            return object.key;\n          }\n\n          return null;\n        });\n        filtered.map(function (keypar) {\n          if ((nextProps.isPublishing || nextProps.isSaving) && !nextProps.isAutoSaving) {\n            wp.apiRequest({\n              path: "/nofm/v2/update-meta?id=".concat(nextProps.postId),\n              method: \'POST\',\n              data: keypar\n            }).then(function (data) {\n              return data;\n            }, function (err) {\n              return err;\n            });\n          }\n        }); //End map\n      } //End if not archivo\n\n    }\n  }]);\n\n  return NofmMetadata;\n}(Component); //End class\n\n\nvar HOC = withSelect(function (select, _ref) {\n  var forceIsSaving = _ref.forceIsSaving;\n\n  var _select2 = select(\'core/editor\'),\n      getCurrentPostId = _select2.getCurrentPostId,\n      getCurrentPostType = _select2.getCurrentPostType,\n      isSavingPost = _select2.isSavingPost,\n      isPublishingPost = _select2.isPublishingPost,\n      isAutosavingPost = _select2.isAutosavingPost,\n      getEditedPostAttribute = _select2.getEditedPostAttribute,\n      isTyping = _select2.isTyping,\n      getPermalink = _select2.getPermalink;\n\n  return {\n    postId: getCurrentPostId(),\n    isSaving: forceIsSaving || isSavingPost(),\n    isAutoSaving: isAutosavingPost(),\n    isPublishing: isPublishingPost(),\n    isTyping: isTyping(),\n    postType: getCurrentPostType()\n  };\n})(NofmMetadata);\nregisterPlugin(\'nofm-metadata\', {\n  icon: \'schedule\',\n  render: HOC\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9zaWRlYmFyLmpzPzBmYzgiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbi8qKlxuICogSW50ZXJuYWwgYmxvY2sgbGlicmFyaWVzXG4gKi9cbnZhciBfXyA9IHdwLmkxOG4uX187XG52YXIgX3dwJGVkaXRQb3N0ID0gd3AuZWRpdFBvc3QsXG4gICAgUGx1Z2luU2lkZWJhciA9IF93cCRlZGl0UG9zdC5QbHVnaW5TaWRlYmFyLFxuICAgIFBsdWdpblNpZGViYXJNb3JlTWVudUl0ZW0gPSBfd3AkZWRpdFBvc3QuUGx1Z2luU2lkZWJhck1vcmVNZW51SXRlbTtcbnZhciBfd3AkY29tcG9uZW50cyA9IHdwLmNvbXBvbmVudHMsXG4gICAgUGFuZWxCb2R5ID0gX3dwJGNvbXBvbmVudHMuUGFuZWxCb2R5LFxuICAgIFRleHRDb250cm9sID0gX3dwJGNvbXBvbmVudHMuVGV4dENvbnRyb2wsXG4gICAgVGV4dGFyZWFDb250cm9sID0gX3dwJGNvbXBvbmVudHMuVGV4dGFyZWFDb250cm9sO1xudmFyIF93cCRlbGVtZW50ID0gd3AuZWxlbWVudCxcbiAgICBDb21wb25lbnQgPSBfd3AkZWxlbWVudC5Db21wb25lbnQsXG4gICAgRnJhZ21lbnQgPSBfd3AkZWxlbWVudC5GcmFnbWVudDtcbnZhciBfd3AkZGF0YSA9IHdwLmRhdGEsXG4gICAgd2l0aFNlbGVjdCA9IF93cCRkYXRhLndpdGhTZWxlY3QsXG4gICAgc2VsZWN0ID0gX3dwJGRhdGEuc2VsZWN0O1xudmFyIHJlZ2lzdGVyUGx1Z2luID0gd3AucGx1Z2lucy5yZWdpc3RlclBsdWdpbjtcbnZhciBhZGRBY3Rpb24gPSB3cC5ob29rcy5hZGRBY3Rpb247XG5cbnZhciBOb2ZtTWV0YWRhdGEgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKE5vZm1NZXRhZGF0YSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTm9mbU1ldGFkYXRhKHByb3BzKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5vZm1NZXRhZGF0YSk7XG5cbiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihOb2ZtTWV0YWRhdGEpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICBfdGhpcy5oYW5kbGVJbnB1dFZhbHVlID0gX3RoaXMuaGFuZGxlSW5wdXRWYWx1ZS5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5oYW5kbGVTZWxlY3RWYWx1ZSA9IF90aGlzLmhhbmRsZVNlbGVjdFZhbHVlLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgX2lkX3lvdXR1YmU6IHtcbiAgICAgICAga2V5OiBudWxsLFxuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfSxcbiAgICAgIF9pZF92aW1lbzoge1xuICAgICAgICBrZXk6IG51bGwsXG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9LFxuICAgICAgX2VwaXNvZGlvX2R1cmF0aW9uOiB7XG4gICAgICAgIGtleTogbnVsbCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0sXG4gICAgICBfZXBpc29kaW9fdXJsOiB7XG4gICAgICAgIGtleTogbnVsbCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0sXG4gICAgICBfZXBpc29kaW9fc2hvdzoge1xuICAgICAgICBrZXk6IG51bGwsXG4gICAgICAgIHZhbHVlOiBudWxsXG4gICAgICB9LFxuICAgICAgX3Byb2dfaG9yYXJpb19kaWFzOiB7XG4gICAgICAgIGtleTogbnVsbCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0sXG4gICAgICBfcHJvZ19ob3JhOiB7XG4gICAgICAgIGtleTogbnVsbCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0sXG4gICAgICBfcHJvZ19kdXJhdGlvbjoge1xuICAgICAgICBrZXk6ICcnLFxuICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgfSxcbiAgICAgIHByb2dyYW1hczogW10sXG4gICAgICBpc19wdF9wb3N0OiBmYWxzZSxcbiAgICAgIGlzX2NwdF9wcm9ncmFtczogZmFsc2UsXG4gICAgICBpc19jcHRfZXBpc29kaW9zOiBmYWxzZSxcbiAgICAgIGlzX2NwdF9nbG9zYXJpbzogZmFsc2VcbiAgICB9O1xuICAgIHZhciBwb3N0VHlwZSA9IF90aGlzLnByb3BzLnBvc3RUeXBlO1xuICAgIHZhciBwYXRoO1xuXG4gICAgaWYgKHBvc3RUeXBlID09PSAncG9zdCcpIHtcbiAgICAgIHBhdGggPSBcIi93cC92Mi9wb3N0cy9cIi5jb25jYXQoX3RoaXMucHJvcHMucG9zdElkKTtcbiAgICB9IGVsc2UgaWYgKHBvc3RUeXBlID09PSAnZXBpc29kaW9zJykge1xuICAgICAgcGF0aCA9IFwiL3dwL3YyL2VwaXNvZGlvcy9cIi5jb25jYXQoX3RoaXMucHJvcHMucG9zdElkKTtcbiAgICB9IGVsc2UgaWYgKHBvc3RUeXBlID09PSAncHJvZ3JhbWFzJykge1xuICAgICAgcGF0aCA9IFwiL3dwL3YyL3Byb2dyYW1hcy9cIi5jb25jYXQoX3RoaXMucHJvcHMucG9zdElkKTtcbiAgICB9IGVsc2UgaWYgKHBvc3RUeXBlID09PSAnZ2xvc2FyaW8nKSB7XG4gICAgICBwYXRoID0gXCIvd3AvdjIvZ2xvc2FyaW8vXCIuY29uY2F0KF90aGlzLnByb3BzLnBvc3RJZCk7XG4gICAgfVxuXG4gICAgaWYgKHBvc3RUeXBlICE9PSAnYXJjaGl2bycpIHtcbiAgICAgIHdwLmFwaUZldGNoKHtcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgX2lkX3lvdXR1YmU6IHtcbiAgICAgICAgICAgIGtleTogJ19pZF95b3V0dWJlJyxcbiAgICAgICAgICAgIHZhbHVlOiBkYXRhLm1ldGEuX2lkX3lvdXR1YmVcbiAgICAgICAgICB9LFxuICAgICAgICAgIF9pZF92aW1lbzoge1xuICAgICAgICAgICAga2V5OiAnX2lkX3ZpbWVvJyxcbiAgICAgICAgICAgIHZhbHVlOiBkYXRhLm1ldGEuX2lkX3ZpbWVvXG4gICAgICAgICAgfSxcbiAgICAgICAgICBfZXBpc29kaW9fZHVyYXRpb246IHtcbiAgICAgICAgICAgIGtleTogJ19lcGlzb2Rpb19kdXJhdGlvbicsXG4gICAgICAgICAgICB2YWx1ZTogZGF0YS5tZXRhLl9lcGlzb2Rpb19kdXJhdGlvblxuICAgICAgICAgIH0sXG4gICAgICAgICAgX2VwaXNvZGlvX3VybDoge1xuICAgICAgICAgICAga2V5OiAnX2VwaXNvZGlvX3VybCcsXG4gICAgICAgICAgICB2YWx1ZTogZGF0YS5tZXRhLl9lcGlzb2Rpb191cmxcbiAgICAgICAgICB9LFxuICAgICAgICAgIF9lcGlzb2Rpb19zaG93OiB7XG4gICAgICAgICAgICBrZXk6ICdfZXBpc29kaW9fc2hvdycsXG4gICAgICAgICAgICB2YWx1ZTogZGF0YS5tZXRhLl9lcGlzb2Rpb19zaG93XG4gICAgICAgICAgfSxcbiAgICAgICAgICBfcHJvZ19ob3JhcmlvX2RpYXM6IHtcbiAgICAgICAgICAgIGtleTogJ19wcm9nX2hvcmFyaW9fZGlhcycsXG4gICAgICAgICAgICB2YWx1ZTogZGF0YS5tZXRhLl9wcm9nX2hvcmFyaW9fZGlhc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgX3Byb2dfaG9yYToge1xuICAgICAgICAgICAga2V5OiAnX3Byb2dfaG9yYScsXG4gICAgICAgICAgICB2YWx1ZTogZGF0YS5tZXRhLl9wcm9nX2hvcmFcbiAgICAgICAgICB9LFxuICAgICAgICAgIF9wcm9nX2R1cmF0aW9uOiB7XG4gICAgICAgICAgICBrZXk6ICdfcHJvZ19kdXJhdGlvbicsXG4gICAgICAgICAgICB2YWx1ZTogZGF0YS5tZXRhLl9wcm9nX2R1cmF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH0gLy9lbmQgY29uc3RydWN0b3JcblxuXG4gIF9jcmVhdGVDbGFzcyhOb2ZtTWV0YWRhdGEsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBfc2VsZWN0ID0gc2VsZWN0KCdjb3JlL2VkaXRvcicpLFxuICAgICAgICAgIGdldEN1cnJlbnRQb3N0VHlwZSA9IF9zZWxlY3QuZ2V0Q3VycmVudFBvc3RUeXBlO1xuXG4gICAgICBpZiAoZ2V0Q3VycmVudFBvc3RUeXBlKCkgPT09ICdwb3N0Jykge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNfcHRfcG9zdCkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfcHRfcG9zdDogdHJ1ZSxcbiAgICAgICAgICAgIGlzX2NwdF9lcGlzb2Rpb3M6IGZhbHNlLFxuICAgICAgICAgICAgaXNfY3B0X3Byb2dyYW1zOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NwdF9nbG9zYXJpbzogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChnZXRDdXJyZW50UG9zdFR5cGUoKSA9PT0gJ2VwaXNvZGlvcycpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzX2NwdF9lcGlzb2Rpb3MpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzX3B0X3Bvc3Q6IGZhbHNlLFxuICAgICAgICAgICAgaXNfY3B0X2VwaXNvZGlvczogdHJ1ZSxcbiAgICAgICAgICAgIGlzX2NwdF9wcm9ncmFtczogZmFsc2UsXG4gICAgICAgICAgICBpc19jcHRfZ2xvc2FyaW86IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZ2V0Q3VycmVudFBvc3RUeXBlKCkgPT09ICdwcm9ncmFtYXMnKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5pc19jcHRfcHJvZ3JhbXMpIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzX3B0X3Bvc3Q6IGZhbHNlLFxuICAgICAgICAgICAgaXNfY3B0X2VwaXNvZGlvczogZmFsc2UsXG4gICAgICAgICAgICBpc19jcHRfcHJvZ3JhbXM6IHRydWUsXG4gICAgICAgICAgICBpc19jcHRfZ2xvc2FyaW86IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZ2V0Q3VycmVudFBvc3RUeXBlKCkgPT09ICdnbG9zYXJpbycpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzX2NwdF9nbG9zYXJpbykge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfcHRfcG9zdDogZmFsc2UsXG4gICAgICAgICAgICBpc19jcHRfZXBpc29kaW9zOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX2NwdF9wcm9ncmFtczogZmFsc2UsXG4gICAgICAgICAgICBpc19jcHRfZ2xvc2FyaW86IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSAvL0dldHRpbmcgcG9zdHMgZnJvbSBwcm9ncmFtYXMgQ1BUXG5cblxuICAgICAgd3AuYXBpRmV0Y2goe1xuICAgICAgICBwYXRoOiAnd3AvdjIvcHJvZ3JhbWFzLycsXG4gICAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgcHJvZ3JhbWFzOiByZXNwb25zZVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSAvLyBFbmQgZGlkIG1vdW50XG5cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICAvL2VuZCBnZXQgZGVyaXZlZCBzdGF0ZSBmcm9tIHByb3BzXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgaXNfcHRfcG9zdCA9IF90aGlzJHN0YXRlLmlzX3B0X3Bvc3QsXG4gICAgICAgICAgaXNfY3B0X3Byb2dyYW1zID0gX3RoaXMkc3RhdGUuaXNfY3B0X3Byb2dyYW1zLFxuICAgICAgICAgIGlzX2NwdF9lcGlzb2Rpb3MgPSBfdGhpcyRzdGF0ZS5pc19jcHRfZXBpc29kaW9zLFxuICAgICAgICAgIGlzX2NwdF9nbG9zYXJpbyA9IF90aGlzJHN0YXRlLmlzX2NwdF9nbG9zYXJpbyxcbiAgICAgICAgICBwcm9ncmFtYXMgPSBfdGhpcyRzdGF0ZS5wcm9ncmFtYXM7XG4gICAgICB2YXIgbWV0YWJveF9yZW5kZXI7IC8vIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUpO1xuXG4gICAgICBpZiAoaXNfcHRfcG9zdCkge1xuICAgICAgICBtZXRhYm94X3JlbmRlciA9IHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChQYW5lbEJvZHksIG51bGwsIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcbiAgICAgICAgICBcImZvclwiOiBcIl9pZF95b3V0dWJlXCJcbiAgICAgICAgfSwgXCJJZCBkZSBZb3V0dWJlXCIpLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiLCBudWxsKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgIG5hbWU6IFwiX2lkX3lvdXR1YmVcIixcbiAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5faWRfeW91dHViZS52YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVJbnB1dFZhbHVlXG4gICAgICAgIH0pLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiLCBudWxsKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1xuICAgICAgICAgIFwiZm9yXCI6IFwiX2lkX3ZpbWVvXCJcbiAgICAgICAgfSwgXCJJZCBkZSBWaW1lb1wiKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIiwgbnVsbCksIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICBuYW1lOiBcIl9pZF92aW1lb1wiLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLl9pZF92aW1lby52YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVJbnB1dFZhbHVlXG4gICAgICAgIH0pLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiLCBudWxsKSk7XG4gICAgICB9IGVsc2UgaWYgKGlzX2NwdF9lcGlzb2Rpb3MgfHwgaXNfY3B0X2dsb3NhcmlvKSB7XG4gICAgICAgIG1ldGFib3hfcmVuZGVyID0gd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFBhbmVsQm9keSwgbnVsbCwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1xuICAgICAgICAgIFwiZm9yXCI6IFwiX2VwaXNvZGlvX2R1cmF0aW9uXCJcbiAgICAgICAgfSwgXCJEdXJhY2lcXHhGM24gZGVsIGVwaXNvZGlvXCIpLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiLCBudWxsKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgIG5hbWU6IFwiX2VwaXNvZGlvX2R1cmF0aW9uXCIsXG4gICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuX2VwaXNvZGlvX2R1cmF0aW9uLnZhbHVlLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0VmFsdWVcbiAgICAgICAgfSksIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIsIG51bGwpLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XG4gICAgICAgICAgXCJmb3JcIjogXCJfZXBpc29kaW9fdXJsXCJcbiAgICAgICAgfSwgXCJVcmwgZGVsIGVwaXNvZGlvXCIpLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiLCBudWxsKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgIG5hbWU6IFwiX2VwaXNvZGlvX3VybFwiLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLl9lcGlzb2Rpb191cmwudmFsdWUsXG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlSW5wdXRWYWx1ZVxuICAgICAgICB9KSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIiwgbnVsbCksIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIG51bGwsIFwiUHJvZ3JhbWEgYWwgcXVlIHBlcnRlbmVjZVwiKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIiwgbnVsbCksIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiLCB7XG4gICAgICAgICAgbmFtZTogXCJfZXBpc29kaW9fc2hvd1wiLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVNlbGVjdFZhbHVlLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLl9lcGlzb2Rpb19zaG93LnZhbHVlXG4gICAgICAgIH0sIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLCB7XG4gICAgICAgICAgdmFsdWU6IFwiXCJcbiAgICAgICAgfSwgXCJTaW4gcHJvZ3JhbWFcIiksIHByb2dyYW1hcy5tYXAoZnVuY3Rpb24gKHByb2dyYW1hKSB7XG4gICAgICAgICAgcmV0dXJuIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLCB7XG4gICAgICAgICAgICBrZXk6IHByb2dyYW1hLmlkLFxuICAgICAgICAgICAgdmFsdWU6IHByb2dyYW1hLmlkXG4gICAgICAgICAgfSwgcHJvZ3JhbWEudGl0bGUucmVuZGVyZWQpO1xuICAgICAgICB9KSkpO1xuICAgICAgfSBlbHNlIGlmIChpc19jcHRfcHJvZ3JhbXMpIHtcbiAgICAgICAgbWV0YWJveF9yZW5kZXIgPSB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoUGFuZWxCb2R5LCBudWxsLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XG4gICAgICAgICAgXCJmb3JcIjogXCJfcHJvZ19ob3JhcmlvX2RpYXNcIlxuICAgICAgICB9LCBcIkhvcmFyaW8gZGVsIHByb2dyYW1hXCIpLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiLCBudWxsKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgIG5hbWU6IFwiX3Byb2dfaG9yYXJpb19kaWFzXCIsXG4gICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuX3Byb2dfaG9yYXJpb19kaWFzLnZhbHVlLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0VmFsdWUsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwiTHVuZXMgeSBWaWVybmVzXCJcbiAgICAgICAgfSksIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIsIG51bGwpLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XG4gICAgICAgICAgXCJmb3JcIjogXCJfcHJvZ19ob3JhXCJcbiAgICAgICAgfSwgXCJIb3JhIGRlbCBwcm9ncmFtYVwiKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIiwgbnVsbCksIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICBuYW1lOiBcIl9wcm9nX2hvcmFcIixcbiAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5fcHJvZ19ob3JhLnZhbHVlLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0VmFsdWUsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwiMCAtIDIzaFwiXG4gICAgICAgIH0pLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiLCBudWxsKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1xuICAgICAgICAgIFwiZm9yXCI6IFwiX3Byb2dfZHVyYXRpb25cIlxuICAgICAgICB9LCBcIkR1cmFjaVxceEYzbiBkZWwgcHJvZ3JhbWFcIiksIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIsIG51bGwpLCB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgbmFtZTogXCJfcHJvZ19kdXJhdGlvblwiLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLl9wcm9nX2R1cmF0aW9uLnZhbHVlLFxuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0VmFsdWUsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwiMzAsIDYwIMOzIDkwbWluXCJcbiAgICAgICAgfSksIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIsIG51bGwpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFBsdWdpblNpZGViYXJNb3JlTWVudUl0ZW0sIHtcbiAgICAgICAgdGFyZ2V0OiBcIm5vZm0tbWV0YWRhdGEtc2lkZWJhclwiXG4gICAgICB9LCBfXygnTm9GbSBNZXRhZGF0YScpKSwgd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFBsdWdpblNpZGViYXIsIHtcbiAgICAgICAgbmFtZTogXCJub2ZtLW1ldGFkYXRhLXNpZGViYXJcIixcbiAgICAgICAgdGl0bGU6IF9fKCdOb2ZtIE1ldGFkYXRhJylcbiAgICAgIH0sIG1ldGFib3hfcmVuZGVyKSk7XG4gICAgfSAvL2VuZCByZW5kZXJcblxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZUlucHV0VmFsdWVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSW5wdXRWYWx1ZShldmVudCkge1xuICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIHZhciB2YWx1ZSA9IHRhcmdldC52YWx1ZTtcbiAgICAgIHZhciBuYW1lID0gdGFyZ2V0Lm5hbWU7XG4gICAgICB0aGlzLnNldFN0YXRlKF9kZWZpbmVQcm9wZXJ0eSh7fSwgbmFtZSwge1xuICAgICAgICBrZXk6IG5hbWUsXG4gICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgfSkpO1xuICAgIH0gLy9lbmQgaGFuZGxlIGlucHV0IHZhbHVlXG5cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVTZWxlY3RWYWx1ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3RWYWx1ZShldmVudCkge1xuICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIHZhciB2YWx1ZSA9IHRhcmdldC52YWx1ZTtcbiAgICAgIHZhciBuYW1lID0gdGFyZ2V0Lm5hbWU7IC8vIGNvbnNvbGUubG9nKGAke3ZhbHVlfSAtPiAke25hbWV9YCk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoX2RlZmluZVByb3BlcnR5KHt9LCBuYW1lLCB7XG4gICAgICAgIGtleTogbmFtZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9KSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHN0YXRlKSB7XG4gICAgICB2YXIgc3RhdGVfYXJyID0gT2JqZWN0LnZhbHVlcyhzdGF0ZSk7XG4gICAgICB2YXIgcG9zdFR5cGUgPSBuZXh0UHJvcHMucG9zdFR5cGU7XG5cbiAgICAgIGlmIChwb3N0VHlwZSAhPT0gJ2FyY2hpdm8nKSB7XG4gICAgICAgIHZhciBmaWx0ZXJlZCA9IHN0YXRlX2Fyci5maWx0ZXIoZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgIGlmIChfdHlwZW9mKG9iamVjdC5rZXkpICE9PSAnb2JqZWN0JyB8fCBvYmplY3Qua2V5ICE9ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0LmtleTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgICAgIGZpbHRlcmVkLm1hcChmdW5jdGlvbiAoa2V5cGFyKSB7XG4gICAgICAgICAgaWYgKChuZXh0UHJvcHMuaXNQdWJsaXNoaW5nIHx8IG5leHRQcm9wcy5pc1NhdmluZykgJiYgIW5leHRQcm9wcy5pc0F1dG9TYXZpbmcpIHtcbiAgICAgICAgICAgIHdwLmFwaVJlcXVlc3Qoe1xuICAgICAgICAgICAgICBwYXRoOiBcIi9ub2ZtL3YyL3VwZGF0ZS1tZXRhP2lkPVwiLmNvbmNhdChuZXh0UHJvcHMucG9zdElkKSxcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGRhdGE6IGtleXBhclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7IC8vRW5kIG1hcFxuICAgICAgfSAvL0VuZCBpZiBub3QgYXJjaGl2b1xuXG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE5vZm1NZXRhZGF0YTtcbn0oQ29tcG9uZW50KTsgLy9FbmQgY2xhc3NcblxuXG52YXIgSE9DID0gd2l0aFNlbGVjdChmdW5jdGlvbiAoc2VsZWN0LCBfcmVmKSB7XG4gIHZhciBmb3JjZUlzU2F2aW5nID0gX3JlZi5mb3JjZUlzU2F2aW5nO1xuXG4gIHZhciBfc2VsZWN0MiA9IHNlbGVjdCgnY29yZS9lZGl0b3InKSxcbiAgICAgIGdldEN1cnJlbnRQb3N0SWQgPSBfc2VsZWN0Mi5nZXRDdXJyZW50UG9zdElkLFxuICAgICAgZ2V0Q3VycmVudFBvc3RUeXBlID0gX3NlbGVjdDIuZ2V0Q3VycmVudFBvc3RUeXBlLFxuICAgICAgaXNTYXZpbmdQb3N0ID0gX3NlbGVjdDIuaXNTYXZpbmdQb3N0LFxuICAgICAgaXNQdWJsaXNoaW5nUG9zdCA9IF9zZWxlY3QyLmlzUHVibGlzaGluZ1Bvc3QsXG4gICAgICBpc0F1dG9zYXZpbmdQb3N0ID0gX3NlbGVjdDIuaXNBdXRvc2F2aW5nUG9zdCxcbiAgICAgIGdldEVkaXRlZFBvc3RBdHRyaWJ1dGUgPSBfc2VsZWN0Mi5nZXRFZGl0ZWRQb3N0QXR0cmlidXRlLFxuICAgICAgaXNUeXBpbmcgPSBfc2VsZWN0Mi5pc1R5cGluZyxcbiAgICAgIGdldFBlcm1hbGluayA9IF9zZWxlY3QyLmdldFBlcm1hbGluaztcblxuICByZXR1cm4ge1xuICAgIHBvc3RJZDogZ2V0Q3VycmVudFBvc3RJZCgpLFxuICAgIGlzU2F2aW5nOiBmb3JjZUlzU2F2aW5nIHx8IGlzU2F2aW5nUG9zdCgpLFxuICAgIGlzQXV0b1NhdmluZzogaXNBdXRvc2F2aW5nUG9zdCgpLFxuICAgIGlzUHVibGlzaGluZzogaXNQdWJsaXNoaW5nUG9zdCgpLFxuICAgIGlzVHlwaW5nOiBpc1R5cGluZygpLFxuICAgIHBvc3RUeXBlOiBnZXRDdXJyZW50UG9zdFR5cGUoKVxuICB9O1xufSkoTm9mbU1ldGFkYXRhKTtcbnJlZ2lzdGVyUGx1Z2luKCdub2ZtLW1ldGFkYXRhJywge1xuICBpY29uOiAnc2NoZWR1bGUnLFxuICByZW5kZXI6IEhPQ1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n')}]);